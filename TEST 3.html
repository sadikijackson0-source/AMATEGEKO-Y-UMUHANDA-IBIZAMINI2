<!DOCTYPE html>
<html lang="rw">
<head>
<meta charset="UTF-8">
<title>Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 10px;
    display: flex;
    flex-direction: column;
    height: 100vh;
}

#header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
}

h2#timer {
    font-size: 24px;
    font-weight: bold;
    margin: 0;
}

#startScreen {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin-top: 50px;
}

#startScreen input {
    padding: 8px;
    font-size: 18px;
    margin-top: 10px;
}

#startScreen button {
    padding: 10px 20px;
    font-size: 18px;
    margin-top: 10px;
    cursor: pointer;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
}

#questionNav {
    display: flex;
    gap: 5px;
    overflow-x: auto;
    margin-bottom: 10px;
}

.qBtn {
    min-width: 40px;
    height: 40px;
    background: #ccc;
    border: 1px solid #666;
    display: flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    border-radius: 5px;
    flex-shrink: 0;
}

.qBtn.answered {
    background: #2196F3;
    color: white;
}

#quiz {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

#quiz h3 {
    white-space: normal;
    word-break: break-word;
}

label {
    display: block;
    margin: 5px 0;
    cursor: pointer;
    position: relative;
}

label span {
    display: inline-block;
    padding: 4px 6px;
    border-radius: 4px;
}

label input[type="radio"]:checked + span {
    background-color: #d4edda;
    font-weight: bold;
}

label input[type="radio"]:checked + span::after {
    content: " ✓";
    color: green;
    font-weight: bold;
    margin-left: 5px;
}

button {
    padding: 10px 18px;
    font-size: 16px;
    cursor: pointer;
    margin: 5px 2px;
    border: none;
    border-radius: 5px;
}

.finishBtn { background-color: green; color:white;}
.prevBtn, .nextBtn { background-color: #2196F3; color:white;}
#btnContainer { text-align:right; margin-top:10px;}
</style>
</head>
<body>

<div id="header" style="display:none">
    <h2 id="timer">20:00</h2>
</div>

<div id="startScreen">
    <h1>Enter your code to start</h1>
    <input type="text" id="codeInput" placeholder="Enter code">
    <button id="startBtn">TANGIRA</button>
</div>

<div id="questionNav"></div>
<div id="quiz"></div>
<div id="review"></div>

<script>
// ------------------- QUIZ DATA -------------------
let quizData = [

  {
    "question": "IYO UBUGARI BW’INZIRA NYABAGENDWA IGENDERWAMO N’IBINYABIZIGA BUDAHAGIJE KUGIRA NGO BIBISIKANE NTA NKOMYI ABAGENZI BATEGETSWE",
    "options": [
      "KUNYURA MU NZIRA Z’IMPANDE Z’ABANYAMAGURU",
      "GUHAGARARA AHO BAGEZA",
      "KOROHERANA",
      "GUKURAHO INKOMYI"
    ],
    "answer": 2
  },
  {
    "question": "UMUYOBOZI W’IKINYABIZIGA YAKORA IKI IGIHE AGEZE AHO BANYURA BAZENGURUTSE",
    "options": [
      "TANGA INZIRA KU BINYABIZIGA BYAMAZE KWINJIRA AHO BANYURA BAZENGURUTSE",
      "TANGA INZIRA KU BINYABIZIGA BIREMEREYE GUSA",
      "TANGA INZIRA GUSA NIBA URI MU NZIRA YA KABIRI NIYA GATATU ISOHOKA",
      "KOMEZA KUKO ABANDI BAYOBOZI B’IBINYABIZIGA BAGOMBA KUGUHA INZIRA"
    ],
    "answer": 0
  },
  {
    "question": "GUTINDA GUTANGA IBIMENYETSO KU MUYOBOZI W’IKINYABIZIGA NI GUTE BIBANGAMIRA ABANDI BAKORESHA UMUHANDA",
    "options": [
      "BIGIRA INGARUKA GUSA KUBATURUKA MUKINDI CYEREKEZO",
      "BISHOBORA GUTUMA BATABONA IGIIHE GIHAGIJE CYO GUSHYIRA MU BIKORWA ICYO AMENYESHEJWE",
      "BABA BAFITE IGIHE GIHAGIJE CYO GUSHYIRA MU BIKORWA IBYO BAMENYESHEJWE",
      "NTACYO BIBANGAMIRAHO"
    ],
    "answer": 1
  },
  {
    "question": "UMUYOBOZI W’IKINYABIZIGA UGEZE MU ISANGANO RY’UMUHANDA UGENZURWA N’IBIMENYETSO BY’AMATARA YAKA AGASANGA ATAKA (ADAKORA), YAKORA IKI",
    "options": [
      "GUCA MU ISANGANO N’UBWITONZI NKAHO NTA KIMENYETSO KIKUYOBORA KIRIMO, WITONDERA ABANDI BAYOBOZI B’IBINYABIZIGA",
      "GUTWARA NEZA NTAGUTINDA MW’ISANGANO",
      "GUHAGARARA MW’ISANGANO NO GUHA INZIRA ABAYOBOZI B’IBINYABIZIGA BATURUKA IBURYO BWAWE",
      "GUCANA AMATARA YOSE NDANGA CYEREKEZO UGAKOMEZA"
    ],
    "answer": 0
  },
  {
    "question": "KUMIHANDA IBYAPA BIKURIKIRA BIGOMBA KUGARAGAZWA KU BURYO BUMWE",
    "options": [
      "IBYAPA BIYOBORA N’IBITEGEKA",
      "IBYAPA BIBURIRA N’IBITEGEKA",
      "IBYAPA BIBUZA N’IBITEGEKA",
      "NTA GISUBIZO CY’UKURI KIRIMO"
    ],
    "answer": 2
  },
  {
    "question": "IBINYABIZIGA BIKURIKIRA BIGOMBA KUGIRA ICYEREKANA MUVUDUKO CYIRAHO UMUYOBOZI AREBA NEZA KANDI KIGAHORA KITABWAHO KUGIRA KIGUME GIKORA NEZA",
    "options": [
      "IBINYABIZIGA BIFITE UMUVUDUKO NIBURA WA KM 60 MU SAHA",
      "IBINYABIZIGA BISHOBORA KURENZA KM 40 MU SAHA",
      "IBINYABIZIGA BISHOBORA KURENZA KM 30 MU SAHA",
      "IBINYABIZIGA BISHOBORA KURENZA KM 20 MU SAHA"
    ],
    "answer": 1
  },
  {
    "question": "IMIZIGO YIKOREWE N’AMAGARE, VELOMOTERI, AMAPIKIPIKI, IBINYAMITENDE BY’IBIZIGA BITATU NIBYO IBIZIGA BINE BIFITE CYANGWA BIDAFITE MOTERI INYUMA NTIBISHOBORA KURENZA IBIPIMO BIKURIKIRA",
    "options": [
      "CM 20",
      "CM 30",
      "CM 50",
      "CM 60"
    ],
    "answer": 2
  },
  {
    "question": "UMUYOBOZI W’IKINYABIZIGA YAKORA IKI IGIHE AGEZE KU KAZAMUKO GASHINZE CYANE",
    "options": [
      "UMUYOBOZI W’IKINYABIZIGA AGOMBA KUGABANYA UMUVUDUKO AKAGUMA KURUHANDE RW’IBURYO YIRINDA IBYAGO",
      "KUGABANYA UMUVUDUKO GUSA",
      "KUGENDA BUHORO GUSA",
      "GUHAGARARA KU MPERA ZUWO MUSOZI"
    ],
    "answer": 0
  },
  {
    "question": "IBYAPA BY’INYONGERA BISHOBORA KUMENYESHA",
    "options": [
      "IBITEGETSWE BYIHARIYE",
      "UBUGERURE CYANGWA AMARENGAMATEGEKO RUSANGE CYANGWA IBIBUJIJWE",
      "A NA B NI IBISUBIZO BYUKURI",
      "NTA GISUBIZO CYUKURI KIRIMO"
    ],
    "answer": 2
  },
  {
    "question": "IBYAPA BY’INYONGERA BISHOBORA KUMENYESHA",
    "options": [
      "IBITEGETSWE BYIHARIYE GUSA",
      "UBUGERURE CYANGWA AMARENGAMATEGEKO RUSANGE CYANGWA IBIBUJIJWE NDETSE N’IBITEGETSWE",
      "A NA B NI IBISUBIZO BYUKURI",
      "NTA GISUBIZO CYUKURI KIRIMO"
    ],
    "answer": 1
  },
  {
    "question": "AMATARA Y’URUGENDO, MU GIHE CY’IBIHU?",
    "options": [
      "NI MEZA KUKO ATUMA UREBA KURE",
      "NI MABI KUKO ARAKUGARUKIRA AKAGUHUMA AMASO",
      "AKWIZEZA KO ABANDI BAKUBONA",
      "NTA GISUBIZO CY’UKURI"
    ],
    "answer": 1
  },
  {
    "question": "IBINYABIZIGA BIHEREKERANYIJE MU BUTUMWA NTIBISHOBORA GUTONDA UBUREBURE BURENGA UMURONGO WA M 500. IYO BIBAYE BITYO IBINYABIZIGA BIHEREKERANYIJE MU BUTUMWA BISHOBORA KUGABANWAMO AMATSINDA ATONZE UMURONGO ATARENGEJE M 50 Z’UBUREBURE KDI HAGATI YAYO HAKABA BYIBURA M 50 ARIKO IBYO NTIBIKURIKIZWA KUBINYABIZIGA BIKURIKIRA",
    "options": [
      "IBINYABIZIGA BYA POLICE BIHEREKERANYIJE",
      "IBINYABIZIGA BY’ABASIRIKARE BIHEREKERANYIJE MU NSISIRO",
      "A NA B NI IBISUBIZO BY’UKURI",
      "NTA GISUBIZO CY’UKURI KIRIMO"
    ],
    "answer": 1
  },
  {
    "question": "IYO IKINYABIZIGA GIKURURWA N’INYAMASWA NACYO GIKURUYE IKINDI UBUREBURE BW’IBIKURURWA BUKABA BURENGA M 18 HATABARIWEMO ICYO KINYABIZIGA CYA MBERE KIZIEITSEHO HAGOMBA IBI BIKURIKIRA",
    "options": [
      "UMUHEREKEZA W’IKINYABIZIGA CYA KABIRI",
      "ABAHEREKEZA BABIRI",
      "A NA B NI IBISUBIZO BY’UKURI",
      "NTA GISUBIZO CY’UKURI KIRIMO"
    ],
    "answer": 0
  },
  {
    "question": "USIBYE IBINYABIZIGA BY’INGABO Z’IGIHUGU, IKINYABIZIGA KIGENDESHWA NA MOTERI KIRIHO IBYUMA NTAMENWA CYANGWA IKINDI CYOSE GITUMA GIKORESHWA MU GUTERA CYANGWA MU KWITABARA NTIGISHOBORA KUGENDA MU NZIRA NYABAGENDWA KIDAFITE URUHUSHYA RWIHARIYE. URWO RUHUSHYA RUTANGWA NABA BAKURIKIRA",
    "options": [
      "POLICE Y’IGIHUGU",
      "MINISITIRI USHINZWE GUTWARA ABANTU N’IBINTU",
      "MINISITIRI W’INGABO",
      "IKIGO CY’IGIHUGU GISHINZWE IMISORO N’AMAHORO"
    ],
    "answer": 1
  },
  {
    "question": "BURI MODOKA YAGENEWE GUTWARA ABANTU, ARIKO UMUBARE WAYO NTARENGWA UKABA MUNSI YA 6 UMUYOBOZI ABARIWEMO IGOMBA KUGIRA IMIKANDARA YO KURINDA IBYAGO IGENEWE ABA BAKURIKIRA",
    "options": [
      "UMUYOBOZI",
      "UMUGENZI WICAYE KU NTEBE Y’IMBERE",
      "ISHOBORA NO KUGIRA IMIKANDARA KU ZINDI NTEBE Z’INYUMA",
      "IBISUBIZO BYOSE NI KURI"
    ],
    "answer": 3
  },
  {
    "question": "UMUYOBOZI W’IKINYABIZIGA AGENDERA INYUMA Y’IKINDI KINYABIZIGA AKABA ADATEGANYA KUKINYURAHO YAKORA IKI?",
    "options": [
      "KUGUMA INYUMA YICYO KINYABIZIGA HAGATI MU MUHANDA",
      "KUGUMA INYUMA YACYO KUGIRA YEMERERE IBINDI BINYABIZIGA GUTAMBUKA",
      "GUTWARIRA INYUMA YE UMWEGEREYE CYANE KUGIRANGO UREKE IBINDI BINYABIZIGA BIBANYUREHO",
      "GUTANGA IBIMENYETSO KUBINDI BINYABIZIGA KO BAKUNYURAHO"
    ],
    "answer": 1
  },
  {
    "question": "KUNYURANAHO BIBUJIJWE IGIHE GUSA",
    "options": [
      "IGIHE MU MUHANDA HAGATI HASHUSHANYIJEMO UMURONGO W’UMWERU UCAGAGUYE",
      "UMUHANDA USHUSHANYIJWEMO UMURONGO WERA UDACAGAGUYE",
      "IKINYABIZIGA GITWAWE KU MUSOZI UNYERERA",
      "NTA GISUBIZO CY’UKURI"
    ],
    "answer": 1
  },
  {
    "question": "IBINYABIZIGA BIKURIKIRA BIGOMBA KUGIRA ITARA RY’UBURURU RIMYATSA RIBONEKA MU MPANDE ZOSE",
    "options": [
      "IBINYABIZIGA BIFITE UBUGARI BURENGA M 2 NA CM 10",
      "IBINYABIZIGA BY’ABATURAGE",
      "IBINYABIZIGA NDAKUMIRWA",
      "IBISUBIZO BYOSE NI UKURI"
    ],
    "answer": 2
  },
  {
    "question": "IYO IMIZIGO IGIZWE N’IBINYAMPEKE, IKAWA AMAKARA, UBWATSI BW’AMATUNGO BIDAHAMBIRIYE, UBUGARI BWAYO BUSHOBORA KUGERA KURI M2 NA CM 75 ARIKO IYO IMIZIGO IJYANWA MU KARERE KATARENGA KM 25 UVUYE AHO YAPAKIRIWE, USIBYE MU NSISIRO, UBUGARI BWAYO BUSHOBORA KUGERA KU BIPIMO BIKURIKIRA",
    "options": [
      "M 4",
      "M3 NA CM 50",
      "M 3",
      "NTA GISUBIZO CY’UKURI KIRIMO"
    ],
    "answer": 2
  },
  {
    "question": "AMAHONI Y’IBINYABIZIGA BIGENDESHWA NA MOTERI AGOMBA KOHEREZA IJWI RY’INJYANA IMWE RIKOMEZA KANDI RIDACENGERA AMATWI ARIKO IBINYABIZIGA BIKURIKIRA BISHOBORA KUGIRA IHONI RIDASANZWE RIDAHUYE N’IBIVUZWE HARUGURU",
    "options": [
      "IBINYABIZIGA NDAKUMIRWA",
      "IBINYABIZIGA BIKORA KU MIHANDA",
      "IBINYABIZIGA BIFITE UBUGARI BURENZE M 2.10",
      "A NA B NI IBISUBIZO BY’UKURI"
    ],
    "answer": 3
  },
  {
    "question": "IBINYABIZIGA BIKURIKIRA BIGOMBA KUGIRA IBIKORESHO BY’IHONI BYUMVIKANIRA MU NTERA YA M 20",
    "options": [
      "AMAPIKIPIKI",
      "VELOMOTERI",
      "IBINYABIZIGA BIGENDESHWA NA MOTERI BIDAPAKIYE",
      "NTA GISUBIZO CY’UKURI KIRIMO"
    ],
    "answer": 1
  }
]



// ------------------- STATE -------------------
let currentQuestion = 0;
let userAnswers = Array(quizData.length).fill(undefined);
let timer;
let timeLeft = 20*60;
const letters = ['A','B','C','D','E','F','G','H'];

const startBtn = document.getElementById("startBtn");
const timerEl = document.getElementById("timer");
const quizEl = document.getElementById("quiz");
const reviewEl = document.getElementById("review");
const navEl = document.getElementById("questionNav");
const startScreen = document.getElementById("startScreen");
const header = document.getElementById("header");

// ------------------- HELPER -------------------
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// ------------------- FUNCTIONS -------------------
function buildNav(){
    navEl.innerHTML="";
    for(let i=0;i<quizData.length;i++){
        let b=document.createElement("div");
        b.className="qBtn";
        b.textContent=i+1;
        if(userAnswers[i]!==undefined) b.classList.add("answered");
        b.onclick=()=>{currentQuestion=i; showQuestion();}
        navEl.appendChild(b);
    }
}

startBtn.addEventListener("click", ()=>{
    const codeInput = document.getElementById("codeInput").value.trim();
    if(codeInput==="") { alert("Please enter code"); return; }

    quizData = shuffleArray(quizData); // shuffle questions only

    startScreen.style.display="none";
    header.style.display="flex";
    buildNav();
    showQuestion();
    startTimer();
});

function showQuestion(){
    if(currentQuestion>=quizData.length) return finishQuiz();
    let q=quizData[currentQuestion];
    let html=`<h3>${currentQuestion+1}. ${q.question}</h3>`;
    q.options.forEach((opt,i)=>{
        const checked = userAnswers[currentQuestion]===i?'checked':'';
        html+=`<label><input type="radio" name="opt" value="${i}" ${checked} onclick="optionClicked(${i})"> <span>${letters[i]}. ${opt}</span></label>`;
    });
    html+=`<div id="btnContainer">`;
    if(currentQuestion>0) html+=`<button class="prevBtn" onclick="prevQuestion()">Previous</button>`;
    if(currentQuestion<quizData.length-1) html+=`<button class="nextBtn" onclick="nextQuestion()">Next</button>`;
    else html+=`<button class="finishBtn" onclick="finishQuiz()">SOZA IKIZAMINI</button>`;
    html+=`</div>`;
    quizEl.innerHTML=html;
    buildNav();
}

window.optionClicked=function(i){
    userAnswers[currentQuestion]=i;
    buildNav();
}

window.nextQuestion=function(){
    currentQuestion++;
    showQuestion();
}
window.prevQuestion=function(){
    if(currentQuestion===0) return;
    currentQuestion--;
    showQuestion();
}

function startTimer(){
    timer=setInterval(()=>{
        timeLeft--;
        let m=String(Math.floor(timeLeft/60)).padStart(2,'0');
        let s=String(timeLeft%60).padStart(2,'0');
        timerEl.textContent=`${m}:${s}`;
        if(timeLeft<=0){
            clearInterval(timer);
            finishQuiz();
        }
    },1000);
}

function finishQuiz(){
    clearInterval(timer);
    quizEl.innerHTML="";
    navEl.innerHTML="";
    let score=0;
    let out=`<h2>Amanota yawe: </h2>`;
    quizData.forEach((q,i)=>{
        const correct=q.answer;
        const user=userAnswers[i];
        if(user===correct) score++;
        out+=`<div style="margin-bottom:12px;"><strong>${i+1}. ${q.question}</strong><br>`;
        q.options.forEach((opt,idx)=>{
            let color="black";
            let label = letters[idx];
            if(user===undefined) color="orange";
            else if(idx===correct) color="green";
            if(user===idx && user!==correct) color="red";
            out+=`<div style="color:${color}; margin-left:10px;">${label}. ${opt}</div>`;
        });
        if(user===undefined) out+=`<div style="color:orange; font-weight:bold;">Wataye iki kibazo</div>`;
        out+=`</div>`;
    });
    out+=`<h3>Score: ${score} / ${quizData.length}</h3>`;
    out+=`
        <button onclick="retakeQuiz()">Tangira Ukundi</button>
        <button onclick="copyReview()">Copy Amanota</button>
    `;
    reviewEl.innerHTML=out;
}

function retakeQuiz(){
    userAnswers = Array(quizData.length).fill(undefined);
    currentQuestion = 0;
    timeLeft = 20*60;
    reviewEl.innerHTML="";
    startScreen.style.display="flex";
    header.style.display="none";
}

function copyReview(){
    const textToCopy = reviewEl.innerText;
    navigator.clipboard.writeText(textToCopy).then(()=>{
        alert("Amanota yawe yanditswe muri clipboard!");
    });
}
</script>
</body>
</html>
